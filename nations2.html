<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机国家图片抽取</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        secondary: '#4B5563',
                        accent: '#F59E0B',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                },
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-xl hover:scale-[1.02];
            }
            .image-container {
                @apply relative overflow-hidden rounded-t-lg;
                padding-top: 66.67%; /* 3:2 图片比例，适合展示国家风景 */
            }
            .image-cover {
                @apply absolute inset-0 w-full h-full object-cover transition-transform duration-700;
            }
            .card-link:hover .image-cover {
                @apply scale-110;
            }
            .btn-primary {
                @apply bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 shadow-md hover:shadow-lg;
            }
            .btn-outline {
                @apply border border-gray-300 hover:border-primary text-gray-700 hover:text-primary font-medium py-2 px-4 rounded-lg transition-all duration-300;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800 min-h-screen flex flex-col">
<!-- 页面头部 -->
<header class="bg-white shadow-sm sticky top-0 z-30">
    <div class="container mx-auto px-4 py-5">
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
            <h1 class="text-[clamp(1.5rem,3vw,2.2rem)] font-bold text-gray-900 flex items-center">
                <i class="fa fa-globe text-primary mr-3 text-2xl"></i>
                随机国家图片抽取
            </h1>
            <div class="flex items-center gap-3">
          <span id="countryCount" class="text-sm text-secondary bg-gray-100 px-3 py-1.5 rounded-full">
            国家库: 17个
          </span>
                <button id="resetBtn" class="btn-outline text-sm">
                    <i class="fa fa-refresh mr-1"></i> 重置
                </button>
            </div>
        </div>
    </div>
</header>

<!-- 主要内容区 -->
<main class="flex-grow container mx-auto px-4 py-8">
    <!-- 选择区域 -->
    <section class="bg-white rounded-xl shadow-md p-6 mb-8 max-w-3xl mx-auto animate-fade-in">
        <h2 class="text-xl font-semibold mb-4 flex items-center">
            <i class="fa fa-cog text-primary mr-2"></i> 抽取设置
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 人数选择 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">选择玩家人数 (1-5人)</label>
                <div class="flex flex-wrap gap-2">
                    <button class="player-btn btn-outline active bg-primary text-white border-primary" data-count="1">1人</button>
                    <button class="player-btn btn-outline" data-count="2">2人</button>
                    <button class="player-btn btn-outline" data-count="3">3人</button>
                    <button class="player-btn btn-outline" data-count="4">4人</button>
                    <button class="player-btn btn-outline" data-count="5">5人</button>
                </div>
                <p id="playerTip" class="mt-2 text-sm text-gray-500">请选择需要分配国家的玩家人数</p>
            </div>

            <!-- 操作按钮 -->
            <div class="flex flex-col justify-end">
                <button id="drawBtn" class="btn-primary w-full">
                    <i class="fa fa-random"></i> 开始随机抽取
                </button>
                <p class="mt-2 text-xs text-gray-400 text-center">
                    每次抽取将从17个国家中随机选择对应人数的不同国家
                </p>
            </div>
        </div>
    </section>

    <!-- 结果展示区域 -->
    <section id="resultSection" class="hidden">
        <div class="flex justify-between items-center mb-6 max-w-6xl mx-auto">
            <h2 class="text-xl font-semibold flex items-center">
                <i class="fa fa-trophy text-accent mr-2"></i> 抽取结果
                <span id="resultCount" class="ml-2 text-sm text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full"></span>
            </h2>
            <button id="redrawBtn" class="btn-outline">
                <i class="fa fa-refresh mr-1"></i> 重新抽取
            </button>
        </div>

        <!-- 国家卡片容器 -->
        <div id="countryContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 max-w-6xl mx-auto">
            <!-- 国家卡片将通过JS动态生成 -->
        </div>
    </section>

    <!-- 初始状态提示 -->
    <section id="initialState" class="text-center py-16 max-w-2xl mx-auto animate-fade-in">
        <div class="bg-white rounded-xl shadow-sm p-8">
            <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-globe text-primary text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2">准备开始抽取</h3>
            <p class="text-gray-500 mb-6">请在上方选择玩家人数并点击"开始随机抽取"按钮</p>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 max-w-md mx-auto">
                <div class="bg-gray-100 rounded-lg p-3 text-center text-sm">
                    <div class="font-medium">17</div>
                    <div class="text-xs text-gray-500">可选国家</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center text-sm">
                    <div class="font-medium">1-5</div>
                    <div class="text-xs text-gray-500">支持人数</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center text-sm">
                    <div class="font-medium">3:2</div>
                    <div class="text-xs text-gray-500">图片比例</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center text-sm">
                    <div class="font-medium">随机</div>
                    <div class="text-xs text-gray-500">公平分配</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 加载状态 -->
    <section id="loadingState" class="hidden text-center py-16 max-w-2xl mx-auto">
        <div class="bg-white rounded-xl shadow-sm p-8">
            <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa fa-circle-o-notch fa-spin text-primary text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2">正在抽取国家</h3>
            <p class="text-gray-500" id="loadingText">请稍候...</p>
            <div class="mt-6 w-full bg-gray-200 rounded-full h-2.5">
                <div id="loadingBar" class="bg-primary h-2.5 rounded-full w-0 transition-all duration-1500"></div>
            </div>
        </div>
    </section>
</main>

<!-- 页脚 -->
<footer class="bg-gray-900 text-gray-300 mt-12">
    <div class="container mx-auto px-4 py-6">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-sm">© 2025 随机国家图片抽取工具 | 包含17个国家的精美图片</p>
            <div class="flex gap-4">
                <a href="#" class="text-gray-400 hover:text-white transition-colors text-sm">
                    <i class="fa fa-question-circle mr-1"></i> 使用帮助
                </a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors text-sm">
                    <i class="fa fa-image mr-1"></i> 图片来源
                </a>
            </div>
        </div>
    </div>
</footer>

<!-- JavaScript -->
<script>
    // 17个国家的数据 - 包含国家名称和封面图
    const countryDatabase = [
        { name: "中国", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/china.jpg", flag: "🇨🇳" },
        { name: "美国", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/america.jpg", flag: "🇺🇸" },
        { name: "埃塞俄比亚", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/ethiopia.jpg", flag: "🇪🇹" },
        { name: "印度", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/india.jpg", flag: "🇮🇳" },
        { name: "日本", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/japan.jpg", flag: "🇯🇵" },
        { name: "韩国", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/korea.jpg", flag: "🇰🇷" },
        { name: "马里", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/mali.jpg", flag: "🇲🇱" },
        { name: "蒙古国", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/mongolia.jpg", flag: "🇲🇳" },
        { name: "波兰", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/poland.jpg", flag: "🇵🇱" },
        { name: "葡萄牙", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/portugal.jpg", flag: "🇵🇹" },
        { name: "罗马", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/rome.jpg", flag: "🇮🇹" },
        { name: "维京", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/vikings.jpg", flag: "🇳🇴" },
        { name: "波斯", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/persia.jpg", flag: "🇮🇷" },
        { name: "埃及", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/egypt.jpg", flag: "🇪🇬" },
        { name: "威尼斯", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/venice.jpg", flag: "🇮🇹" },
        { name: "阿拉伯", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/arab.jpg", flag: "🇦🇪" },
        { name: "希腊", image: "https://game-random.oss-cn-guangzhou.aliyuncs.com/doc/greece.jpg", flag: "🇬🇷" }
    ];

    // DOM元素
    const playerBtns = document.querySelectorAll('.player-btn');
    const drawBtn = document.getElementById('drawBtn');
    const redrawBtn = document.getElementById('redrawBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultSection = document.getElementById('resultSection');
    const initialState = document.getElementById('initialState');
    const loadingState = document.getElementById('loadingState');
    const countryContainer = document.getElementById('countryContainer');
    const resultCount = document.getElementById('resultCount');
    const playerTip = document.getElementById('playerTip');
    const loadingText = document.getElementById('loadingText');
    const loadingBar = document.getElementById('loadingBar');

    // 状态变量
    let selectedPlayerCount = 1;
    let drawnCountries = [];

    // 初始化人数选择按钮
    playerBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // 移除其他按钮的选中状态
            playerBtns.forEach(b => {
                b.classList.remove('active', 'bg-primary', 'text-white', 'border-primary');
                b.classList.add('btn-outline');
            });

            // 添加当前按钮的选中状态
            btn.classList.add('active', 'bg-primary', 'text-white', 'border-primary');
            btn.classList.remove('btn-outline');

            // 更新选中的人数
            selectedPlayerCount = parseInt(btn.dataset.count);

            // 更新提示文本
            playerTip.textContent = `已选择 ${selectedPlayerCount} 人，将随机分配 ${selectedPlayerCount} 个不同国家`;
            playerTip.classList.add('text-primary');

            // 短暂高亮提示
            playerTip.classList.add('animate-pulse-slow');
            setTimeout(() => {
                playerTip.classList.remove('animate-pulse-slow');
            }, 1000);
        });
    });

    // 抽取逻辑
    drawBtn.addEventListener('click', startDraw);
    redrawBtn.addEventListener('click', startDraw);

    // 重置功能
    resetBtn.addEventListener('click', () => {
        // 重置人数选择
        playerBtns.forEach((btn, index) => {
            if (index === 0) {
                btn.classList.add('active', 'bg-primary', 'text-white', 'border-primary');
                btn.classList.remove('btn-outline');
                selectedPlayerCount = 1;
            } else {
                btn.classList.remove('active', 'bg-primary', 'text-white', 'border-primary');
                btn.classList.add('btn-outline');
            }
        });

        // 重置提示
        playerTip.textContent = "请选择需要分配国家的玩家人数";
        playerTip.classList.remove('text-primary');

        // 显示初始状态，隐藏结果
        resultSection.classList.add('hidden');
        initialState.classList.remove('hidden');
        loadingState.classList.add('hidden');

        // 清空结果
        countryContainer.innerHTML = '';
        drawnCountries = [];
    });

    // 开始抽取函数
    function startDraw() {
        // 验证选择的人数
        if (selectedPlayerCount < 1 || selectedPlayerCount > 5) {
            playerTip.textContent = "请选择1-5人的有效人数";
            playerTip.classList.add('text-red-500', 'animate-pulse-slow');
            setTimeout(() => {
                playerTip.classList.remove('animate-pulse-slow');
            }, 1000);
            return;
        }

        // 显示加载状态，隐藏其他状态
        initialState.classList.add('hidden');
        resultSection.classList.add('hidden');
        loadingState.classList.remove('hidden');

        // 重置加载进度
        loadingBar.style.width = '0%';
        loadingText.textContent = `正在随机选择 ${selectedPlayerCount} 个国家...`;

        // 模拟加载进度
        const progressSteps = 5;
        const stepDuration = 300;
        let currentProgress = 0;

        const progressInterval = setInterval(() => {
            currentProgress += 100 / progressSteps;
            loadingBar.style.width = `${currentProgress}%`;

            // 更新加载文本
            if (currentProgress === 20) loadingText.textContent = "正在筛选国家库...";
            else if (currentProgress === 40) loadingText.textContent = "正在随机排序...";
            else if (currentProgress === 60) loadingText.textContent = "正在选择匹配国家...";
            else if (currentProgress === 80) loadingText.textContent = "正在准备展示结果...";

            if (currentProgress >= 100) {
                clearInterval(progressInterval);

                // 完成加载后生成结果
                setTimeout(() => {
                    generateDrawResult();
                }, 500);
            }
        }, stepDuration);
    }

    // 生成抽取结果
    function generateDrawResult() {
        // 从国家库中随机选择指定数量的不同国家
        drawnCountries = getRandomCountries(selectedPlayerCount);

        // 更新结果计数
        resultCount.textContent = `共 ${drawnCountries.length} 个国家`;

        // 清空容器
        countryContainer.innerHTML = '';

        // 创建国家卡片
        drawnCountries.forEach((country, index) => {
            // 创建卡片元素
            const countryCard = document.createElement('div');
            countryCard.className = 'bg-white rounded-xl shadow-md overflow-hidden card-hover animate-slide-up';
            countryCard.style.animationDelay = `${index * 100}ms`;

            // 设置卡片内容
            countryCard.innerHTML = `
          <div class="image-container">
            <img src="${country.image}" alt="${country.name} 封面图" class="image-cover">
            <div class="absolute top-3 left-3 bg-primary/80 text-white text-xs font-medium px-2 py-1 rounded">
              玩家 ${index + 1}
            </div>
          </div>
          <div class="p-4">
            <div class="flex items-center justify-between mb-2">
              <h3 class="font-semibold text-lg flex items-center">
                ${country.flag} ${country.name}
              </h3>
              <span class="text-xs text-gray-400">
                #${index + 1}
              </span>
            </div>
            <button class="view-details-btn w-full text-sm text-primary hover:text-primary/80 transition-colors flex items-center justify-center gap-1 py-1">
              <i class="fa fa-search-plus"></i> 查看详情
            </button>
          </div>
        `;

            // 添加到容器
            countryContainer.appendChild(countryCard);

            // 详情按钮事件
            const detailsBtn = countryCard.querySelector('.view-details-btn');
            detailsBtn.addEventListener('click', () => {
                alert(`${country.flag} ${country.name}\n图片已加载完成，可点击查看大图`);
                // 实际应用中可在这里实现查看大图功能
            });
        });

        // 显示结果，隐藏加载状态
        loadingState.classList.add('hidden');
        resultSection.classList.remove('hidden');
    }

    // 从国家库中获取指定数量的随机不同国家
    function getRandomCountries(count) {
        // 复制国家库以避免修改原数组
        const countryPool = [...countryDatabase];
        const selectedCountries = [];

        // 随机选择指定数量的国家
        for (let i = 0; i < count && countryPool.length > 0; i++) {
            // 生成随机索引
            const randomIndex = Math.floor(Math.random() * countryPool.length);

            // 取出选中的国家并添加到结果中
            selectedCountries.push(countryPool[randomIndex]);

            // 从池中移除已选中的国家（避免重复）
            countryPool.splice(randomIndex, 1);
        }

        return selectedCountries;
    }

    // 页面加载完成后的初始化
    document.addEventListener('DOMContentLoaded', () => {
        // 默认选中1人
        playerBtns[0].click();

        // 显示初始状态
        initialState.classList.remove('hidden');
    });
</script>
</body>
</html>