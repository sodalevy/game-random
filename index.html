<!DOCTYPE html>
<html lang="en">
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }

    #countrySelection {
        margin: 20px 0;
    }

    #result {
        margin-top: 20px;
    }

    #result img {
        width: 350px;
        height: auto;
        margin-top: 5px;
    }
</style>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国家分配</title>
</head>

<body>
<!-- 选择玩家数量的单选按钮 -->
<div id="playerCount">
    <input type="radio" name="playerCount" value="1"> 1 player<br>
    <input type="radio" name="playerCount" value="2"> 2 players<br>
    <input type="radio" name="playerCount" value="3"> 3 players<br>
    <input type="radio" name="playerCount" checked value="4"> 4 players<br>
    <input type="radio" name="playerCount" value="5"> 5 players
</div>
<!-- 选择国家的多选框 -->
<div id="countrySelection">
    <input type="checkbox" id="selectAll" onclick="toggleSelectAll()"> 全部
    <input type="checkbox" name="country" value="中国" data-image="{{asset("images/nations/china.jpg")}}"> 中国
    <input type="checkbox" name="country" value="美国" data-image="{{asset("images/nations/america.jpg")}}"> 美国
    <input type="checkbox" name="country" value="埃塞俄比亚" data-image="{{asset("images/nations/ethiopia.jpg")}}"> 埃塞俄比亚
    <input type="checkbox" name="country" value="印度" data-image="{{asset("images/nations/india.jpg")}}"> 印度
    <input type="checkbox" name="country" value="日本" data-image="{{asset("images/nations/japan.jpg")}}"> 日本
    <input type="checkbox" name="country" value="韩国" data-image="{{asset("images/nations/korea.jpg")}}"> 韩国
    <input type="checkbox" name="country" value="马里" data-image="{{asset("images/nations/mali.jpg")}}"> 马里
    <input type="checkbox" name="country" value="蒙古国" data-image="{{asset("images/nations/mongolia.jpg")}}"> 蒙古国
    <input type="checkbox" name="country" value="波兰" data-image="{{asset("images/nations/poland.jpg")}}"> 波兰
    <input type="checkbox" name="country" value="葡萄牙" data-image="{{asset("images/nations/portugal.jpg")}}"> 葡萄牙
    <input type="checkbox" name="country" value="罗马" data-image="{{asset("images/nations/rome.jpg")}}"> 罗马
    <input type="checkbox" name="country" value="维京" data-image="{{asset("images/nations/vikings.jpg")}}"> 维京
    <input type="checkbox" name="country" value="波斯" data-image="{{asset("images/nations/persia.jpg")}}"> 波斯
</div>
<!-- 抽取按钮 -->
<button id="drawButton" onclick="drawCountries()">抽取</button>
<!-- 显示结果的容器 -->
<div id="result"></div>

<script>
    window.addEventListener('DOMContentLoaded', function() {
        // 默认选中所有国家选项
        const countryCheckboxes = document.querySelectorAll('input[name="country"]');
        countryCheckboxes.forEach(checkbox => {
            checkbox.checked = true;
        });

        // 选中"全选"复选框
        document.getElementById('selectAll').checked = true;
    });

    // 全选功能函数
    function toggleSelectAll() {
        const selectAllCheckbox = document.getElementById('selectAll');
        const countryCheckboxes = document.querySelectorAll('input[name="country"]');
        countryCheckboxes.forEach(checkbox => {
            checkbox.checked = selectAllCheckbox.checked;
        });
    }

    // 抽取国家并分配给玩家的函数
    function drawCountries() {
        // 获取玩家数量
        const playerCountRadios = document.querySelectorAll('input[name="playerCount"]:checked');
        if (playerCountRadios.length === 0) {
            alert('请选择玩家数量');
            return;
        }
        const playerCount = parseInt(playerCountRadios[0].value);
        // 获取所有选中的国家复选框
        const selectedCountries = Array.from(document.querySelectorAll('input[name="country"]:checked')).map(checkbox => ({
            name: checkbox.value,
            image: checkbox.dataset.image
        }));

        // 检查是否有选中的国家
        if (selectedCountries.length === 0) {
            alert('请至少选择一个国家');
            return;
        }

        // 打乱选中国家的顺序
        const shuffledCountries = selectedCountries.sort(() => Math.random() - 0.5);
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = '';

        // 分配国家给玩家
        for (let i = 0; i < playerCount; i++) {
            if (i < shuffledCountries.length) {
                const country = shuffledCountries[i];
                const playerResult = document.createElement('div');
                playerResult.innerHTML = `${i + 1} player: ${country.name}<br><img src="${country.image}" alt="${country.name}">`;
                resultDiv.appendChild(playerResult);
            } else {
                const playerResult = document.createElement('div');
                playerResult.textContent = `${i + 1} player: 无可用国家`;
                resultDiv.appendChild(playerResult);
            }
        }
    }
</script>
</body>



</html>
